# Установка дополнительно ПО в Linux

***

При установке дополнительного ПО в Linux есть два основных варианта:

1. установка из исходных кодов,
1. установка из скомпилированных бинарных пакетов.

1 вариант - способен предоставить более свежие версии ПО и оптимизировать их под конкретный процессор. Но более трудоёмок как в установке, так и в дальнейшем обслуживании.
Кроме того, на сборку программы из исходных кодов потребуется время и вычислительные ресурсы.

Самое большое неудобство при установке из исходных кодов - невозможность сохранить место установки всех скомпилированных компонент и обеспечить их удаление или обновление.

2 вариант - быстрее и не требует мощного процессора и большого объёма памяти на ЭВМ, где будет проводится установка.

Есть два варианта распространения бинарных пакетов - обычный архив и специальный пакет, специфичный для определённой системы управления пакетов. Различные дистрибутивы используют разные форматы пакетов и системы их хранения в репозиториях.

Количество форматов пакетов и репозиториев гораздо меньше количества дистрибутивов. Очень часто разные дистрибутивы используют один и тот же формат пакетов. Например, Debian и Ubintu использую deb пакеты и одинаковую структуру репозиториев, но разные версии софта в своих выпусках.

Внутри пакета содержится архив с ПО, скрипты для его настройки при установке и удалении, а так же список зависимостей. Например, при установке текстового процессора LibreOffice в качестве зависимости будет фигурировать библиотека gtk+, которая используется для отрисовки пользовательского интерфейса.

Есть два варианта установки ПО из пакета:

1. с использование утилиты, работающей непосредственно с пакетами (dpkg для Debian). Она будет предупреждать об отсутствующих зависимостях и не будет проводить полную настройку пакетов до их установки.
2. с помощью менеджера пакетов (apt для Debian), который устанавливает пакеты из репозиториев с учётом всех их зависимостей. Это позволяет установить любой пакет с автоматической установкой всех необходимых ему библиотек.

В случае с дистрибутивом Debian (а так же Ubuntu, Mint и других, основанных на deb пакетах) для установки отдельных пакетов используется утилита dpgk, 

для работы с репозиториями — apt (она имеет несколько отдельных команд, которые мы рассмотрим ниже), 

а так же две оболочки для неё — aptitude (для работы в консоли) и synaptic (для графического интерфейса пользователя).

Основное действие, которое используется с утилитой dpkg это установка пакетов. Для этого она запускается с параметром -i (--install) и указанием пути к устанавливаемому пакету.

Кроме установки можно удалить пакет с помощью параметра -r (--remove) и -P (--purge). 

Их действие отличается тем, что при удалении пакетов с помощью -r остаются файлы конфигурации и они будут использованы при повторной установке пакета. 

Параметр -p удаляет абсолютно все файлы, которые были установлены для этого пакета.

Посмотреть файлы из пакета, используя параметр -L (--listfiles) с указанием имени пакета, который хочется просмотреть.

Параметр -l (--list) показывает список установленных пакетов по маске.

Просмотр списков установленных пакетов и файлов работает благодаря тому, что dpkg ведёт централизованную базу данных с записями о всех установленных пакетах и их файлах. Это позволяет полностью удалить любую программу. Но если программа создала при своей работе файлы с данными, они не являются её частью, не перечислены в этой базе и не будут автоматически удалены.

Утилита dpkg работает только с пакетами, находящимися локально и не отслеживает их зависимости. Для работы с репозиториями, загрузки пакетов и установки пакетов со всем, что им требуется для работы используется утилита apt.

Для работы с репозиториями добавляется ещё несколько команд. Первая это update. Она не требует дополнительных параметров, и обновляет список пакетов, доступных в репозитории. После этого можно установить новые пакеты, которых не было ранее. 

Для поиска пакетов используется две команды: search (поиск строки в имени и описанию пакета) и list (показывает пакеты, удовлетворяющие определённому шаблону). 

Для просмотра подробной информации о пакете можно использовать команду show c именем пакета, который вам интересен.

Кроме установки можно попросить обновить все установленные пакеты с помощью upgrade. 

Для использования репозиториев система должны знать, где они размещены. При установке с диска как правило в конфигурации прописывается одни источник пакетов - установочный диск.

Сетевые репозитории подключаются вручную. Либо, реже, через установку deb пакетов с необходимыми для них настройками.

Текущие настройки репозиториев apt в debian и ubuntu можно посмотреть в конфигурационном файле `/etc/apt/sources.list`.

Для получения информации о текущем содержимом репозитория используется команда apt update, которая скачивает текущее оглавление репозитория.

Одной из частых ошибок при установке ПО является редкое выполнение обновления информации о репозитории. При этом версия пакетов в репозитории меняется и они не могут быть загружены. Во всех таких случаях до поиска неисправлностей нужно попробовать скачайть новое содержание и попробовать установить пакет ещё раз.

###### [`Вернутся вверх`](https://github.com/Shin0kari/System-administration/blob/main/lections/Lec8.%20Installing%20additional%20software%20on%20Linux.md#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-%D0%B4%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE-%D0%BF%D0%BE-%D0%B2-linux)
