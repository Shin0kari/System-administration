# Работа в командном интерпритаторе bash и команды для базовой настройки

# Темы, затронутые в лекции 5: 

1. [`Командные интерпретаторы`](https://github.com/Shin0kari/System-administration/blob/main/lections/Lec5.%20Working%20with%20the%20bash%20shell%20and%20commands%20for%20basic%20setup.md#%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%BD%D1%8B%D0%B5-%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%BF%D1%80%D0%B5%D1%82%D0%B0%D1%82%D0%BE%D1%80%D1%8B)

1. [`Основные команды для работы в терминале`](https://github.com/Shin0kari/System-administration/blob/main/lections/Lec5.%20Working%20with%20the%20bash%20shell%20and%20commands%20for%20basic%20setup.md#%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5-%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D1%8B-%D0%B4%D0%BB%D1%8F-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B-%D0%B2-%D1%82%D0%B5%D1%80%D0%BC%D0%B8%D0%BD%D0%B0%D0%BB%D0%B5)

1. [`Сетевые настройки`](https://github.com/Shin0kari/System-administration/blob/main/lections/Lec5.%20Working%20with%20the%20bash%20shell%20and%20commands%20for%20basic%20setup.md#%D1%81%D0%B5%D1%82%D0%B5%D0%B2%D1%8B%D0%B5-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8)

1. [`Работа с пользователями`](https://github.com/Shin0kari/System-administration/blob/main/lections/Lec5.%20Working%20with%20the%20bash%20shell%20and%20commands%20for%20basic%20setup.md#%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-%D1%81-%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F%D0%BC%D0%B8)

1. [`Дополнительные возможности`](https://github.com/Shin0kari/System-administration/blob/main/lections/Lec5.%20Working%20with%20the%20bash%20shell%20and%20commands%20for%20basic%20setup.md#%D0%B4%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5-%D0%B2%D0%BE%D0%B7%D0%BC%D0%BE%D0%B6%D0%BD%D0%BE%D1%81%D1%82%D0%B8)

1. [`Права доступа к объектам файловой системы`](https://github.com/Shin0kari/System-administration/blob/main/lections/Lec5.%20Working%20with%20the%20bash%20shell%20and%20commands%20for%20basic%20setup.md#%D0%BF%D1%80%D0%B0%D0%B2%D0%B0-%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0-%D0%BA-%D0%BE%D0%B1%D1%8A%D0%B5%D0%BA%D1%82%D0%B0%D0%BC-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2%D0%BE%D0%B9-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B)

***

## Командные интерпретаторы.
###### [`Вернутся вверх`](https://github.com/Shin0kari/System-administration/blob/main/lections/Lec5.%20Working%20with%20the%20bash%20shell%20and%20commands%20for%20basic%20setup.md#%D1%82%D0%B5%D0%BC%D1%8B-%D0%B7%D0%B0%D1%82%D1%80%D0%BE%D0%BD%D1%83%D1%82%D1%8B%D0%B5-%D0%B2-%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8-5)

Существует два варианта построения пользовательского интерфейса - графический (GUI) и командной строки (терминал). 

Графический интерфейс ориентирован на интуитивно-понятное управление и взаимодействие 
с пользователем с помощью визуальных элементов и манипулятора мышь либо сенсорного экрана. 
GUI является более сложным в разработке и требует большего количества вычислительных ресурсов.

Интерфейс командной строки строится на взаимодействие с ЭВМ с помощью ввода текстовых строк, 
содержащих команду и её параметры. 

Благодаря взаимодействию с ЭВМ с помощью командной строки можно легко производить автоматизацию частых или массовых действий. 

Для этого можно использовать скрипты, содержащие последовательность команд и управляющие конструкции. 

Примером таких конструкция могут служить циклы и условные переходы. 

По сути, интерфейс командной строки представляет из себя язык программирования высокого уровня 
с развитыми средствами взаимодействия с операционной системой для осуществления операция с файлами, 
запуска программ и завершения работы программ. 

Для работы такого интерфейса требуется специальная программа - интерпретатор командной строки.

Существует множество интерпретаторов. 
В операционных системах Microsoft это **cmd** и **PowerShell**, в unix системах (и linux в том числе) - 
**bash**, **dash**, **ksh**, **csh**, **zsh** и другие. 

Несмотря на такое многообразие, принципы работы во всех них одинаковые.

Рассмотрим основы для работы в bash

## Основные команды для работы в терминале.
###### [`Вернутся вверх`](https://github.com/Shin0kari/System-administration/blob/main/lections/Lec5.%20Working%20with%20the%20bash%20shell%20and%20commands%20for%20basic%20setup.md#%D1%82%D0%B5%D0%BC%D1%8B-%D0%B7%D0%B0%D1%82%D1%80%D0%BE%D0%BD%D1%83%D1%82%D1%8B%D0%B5-%D0%B2-%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8-5)

Приведённые ниже команды являются базовыми для манипуляций с файлами и повседневной работы.

* cd - смена текущего каталога
* ls - просмотр содержимого каталога (без параметров - текущего)
* rm - удаление объекта файловой системы
* mkdir - создание каталога
* rmdir - удаление каталога (можно заменить на rm - r)
* find - поиск объектов в файловой системе
* nano - простой текстовый редактор. В качестве параметра указывается имя редактируемого файла. Если файла его нет, то он создаётся при записи изменений.
* man - показывает страницы со справкой по какой-либо программе (имя программы передаётся в качестве параметра).

Для запуска программ, установленных в системе, их имена набираются в командной строке (и дополняются параметрами, для тонкой работы, при необходимости).

Для запуска своей программы, находящейся не в текущем каталоге необходимо указать полный путь к исполняемому файлу. 

Либо он начинается с корневого каталога "/", либо можно воспользоваться служебным именем ".", 
который обозначает полный путь к текущему каталогу. 

## Сетевые настройки.
###### [`Вернутся вверх`](https://github.com/Shin0kari/System-administration/blob/main/lections/Lec5.%20Working%20with%20the%20bash%20shell%20and%20commands%20for%20basic%20setup.md#%D1%82%D0%B5%D0%BC%D1%8B-%D0%B7%D0%B0%D1%82%D1%80%D0%BE%D0%BD%D1%83%D1%82%D1%8B%D0%B5-%D0%B2-%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8-5)

Для ручного управления сетевыми настройками используется утилита **ip**. 
У неё есть обязательный параметр, который указывает, с какими настройками мы хотим работать. 

**ip addr** работает с адресами для IP протокола.

**ip link** с настройками протоколов канального уровня.
**ip route** с маршрутами. 

Без параметров приведённые команды выводят информацию о настройках.

Проверка работы сети в основном осуществляется с помощью утилит ping и traceroute. 

**ping** позволяет проверить, доходит ли до удалённого узла специальный диагностический пакет. 
Существуют ситуации, когда узел рабочий, но не отвечает на такие сообщения. 

**traceroute** использует аналогичные сетевые пакеты, что и ping, 
но позволяет просмотреть все промежуточные маршрутизаторы на пути к удалённой машине.

Для проверки работы службы DNS используется **nslookup**, 
которая осуществляет обращение к DNS серверу и преобразование из IP адреса в символьное имя и обратно, 
или запрос к записям типа srv или mx.

## Работа с пользователями.
###### [`Вернутся вверх`](https://github.com/Shin0kari/System-administration/blob/main/lections/Lec5.%20Working%20with%20the%20bash%20shell%20and%20commands%20for%20basic%20setup.md#%D1%82%D0%B5%D0%BC%D1%8B-%D0%B7%D0%B0%D1%82%D1%80%D0%BE%D0%BD%D1%83%D1%82%D1%8B%D0%B5-%D0%B2-%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8-5)

Работа с пользователями и группами происходит с помощью команд **adduser/addgroup/deluser/useradd/usermod**

Изменение паролей происходит с помощью команды **passwd**. Создание хешей паролей  - **mkpasswd**.

## Дополнительные возможности.
###### [`Вернутся вверх`](https://github.com/Shin0kari/System-administration/blob/main/lections/Lec5.%20Working%20with%20the%20bash%20shell%20and%20commands%20for%20basic%20setup.md#%D1%82%D0%B5%D0%BC%D1%8B-%D0%B7%D0%B0%D1%82%D1%80%D0%BE%D0%BD%D1%83%D1%82%D1%8B%D0%B5-%D0%B2-%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8-5)

Часть настроек можно передавать программам в виде переменных окружения. 
По функционалу они аналогичны переменным в языках программирования.

Задать переменную окружения с помощью команды export:

`export MYVAR=value`

Выбор имени переменных имеет те же правила, что и для объектов файловой системы. 
Для использования переменных окружения в качестве параметров команд 
или в других конструкциях используется запись их имени с префиксом $. 

Для предыдущего примера это будет выглядеть так:

`echo $MYVAR`

Для отслеживания запущенных программ и их активности в linux используются 2 утилиты - ps и top. 

**ps** выводит список запущенных процессов. 
Без параметров это процессы, запущенные из текущей сессии командного интерпритатора. 
**top** показывает список запущенных процессов с указанием потребления ресурсов и общей загрузки системы. 
top обновляет информацию каждые 3 секунды по умолчанию. 

Списко процессов, показываемый утилитой top, по умолчанию отсортирован по потреблению ресурсов процессора, 
и позволяет быстро найти программу, потребляющую слишком много ресурсов.

bash позволяет организовать работу с несколькими программами одновременно. 
Поскольку экран один, взаимодействовать можно только с одной из запущенных программ, 
остальные помещаются в фон и ставятся на паузу.

Для просмотра запущенных в фоне программ используется утилита **jobs**.

С помощью команды **fg** можно подключить к запущенной в фоне программе и продолжить работу с ней. 
Без параметров **fg** подключается к последней отправленной в фон программе, с указанием номера задачи.

## Права доступа к объектам файловой системы.
###### [`Вернутся вверх`](https://github.com/Shin0kari/System-administration/blob/main/lections/Lec5.%20Working%20with%20the%20bash%20shell%20and%20commands%20for%20basic%20setup.md#%D1%82%D0%B5%D0%BC%D1%8B-%D0%B7%D0%B0%D1%82%D1%80%D0%BE%D0%BD%D1%83%D1%82%D1%8B%D0%B5-%D0%B2-%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8-5)

В Linux права доступа к объектам файловой системы делятся на три группы - **для владельца**, **группы** и **всех остальных**. 
В каждой из груп может быть 3 бита доступа: **на чтение (r)**, **запись (w)**, **изменение (e)** и **удаление (x)**.

Бит выполения для файлов позволяет запускать их как программы, для каталогов он позволяет получать список их содержимого.

Посмотреть текущие права доступа к файлу можно с помощью команды ls с параметром -l.

Модифицировать права доступа можно с помощью утилиты **chmod**, 
изменять владельца и группу, которой принадлежит файл, с помощью **chown**.

**chown** в качестве параметра передаётся имя нового владельца и/или новой группы, 
которй он будет принадлежать и имя объекта файловой системы, для которой производится это изменений.

**chmod** в качетсве параметров передаются изменения в текущих правах для кадой из трёх групп доступа или для всех сразу. 

###### [`Вернутся вверх`](https://github.com/Shin0kari/System-administration/blob/main/lections/Lec5.%20Working%20with%20the%20bash%20shell%20and%20commands%20for%20basic%20setup.md#%D1%82%D0%B5%D0%BC%D1%8B-%D0%B7%D0%B0%D1%82%D1%80%D0%BE%D0%BD%D1%83%D1%82%D1%8B%D0%B5-%D0%B2-%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8-5)
